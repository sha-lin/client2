{% extends 'base.html' %}

{% block title %}Customer Self-Quote - Get Instant Quote{% endblock %}

{% block content %}
<div class="p-8">
    <!-- Header -->
    <div class="mb-6">
        <h2 class="text-2xl font-medium text-gray-900 mb-2">Customer Self-Quote</h2>
        <p class="text-gray-600">Configure your product and get an instant quote</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Configuration Panel -->
        <div class="lg:col-span-2 space-y-6">
            <!-- Product Selection -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-2">Select Product</h3>
                <p class="text-sm text-gray-600 mb-4">Choose from our catalog of available products</p>
                <select id="productSelect" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="business-cards">Premium Business Cards</option>
                    <option value="roll-up-banner">Roll-Up Banner - Standard</option>
                    <option value="t-shirt">Custom T-Shirt Printing</option>
                    <option value="letterhead">Letterhead Printing</option>
                </select>
            </div>

            <!-- Product Preview -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Product Preview</h3>
                <div class="grid grid-cols-3 gap-4 mb-4">
                    <img src="https://images.unsplash.com/photo-1589939705384-5185137a7f0f?w=400&h=400&fit=crop" alt="Business card preview" class="w-full h-32 object-cover rounded border border-gray-200">
                    <img src="https://images.unsplash.com/photo-1611532736597-de2d4265fba3?w=400&h=400&fit=crop" alt="Matte finish example" class="w-full h-32 object-cover rounded border border-gray-200">
                    <img src="https://images.unsplash.com/photo-1635776062043-223faf322554?w=400&h=400&fit=crop" alt="Gloss finish example" class="w-full h-32 object-cover rounded border border-gray-200">
                </div>
                <div>
                    <h4 class="text-sm text-gray-900 mb-2 font-medium">Premium Business Cards</h4>
                    <p class="text-sm text-gray-600 mb-3">Professional business cards with premium finish options. Perfect for making a lasting first impression.</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded">Fast Turnaround</span>
                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded">High Quality</span>
                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded">Multiple Options</span>
                    </div>
                </div>
            </div>

            <!-- Configuration Options -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-2">Configure Your Product</h3>
                <p class="text-sm text-gray-600 mb-6">Customize to your exact requirements</p>
                
                <div class="space-y-6">
                    <!-- Quantity Slider -->
                    <div>
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium text-gray-700">Quantity</label>
                            <span class="text-sm text-gray-900"><span id="quantityValue">500</span> pieces</span>
                        </div>
                        <input type="range" id="quantitySlider" min="100" max="2000" step="50" value="500" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>100</span>
                            <span>2,000</span>
                        </div>
                        <div class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-700 flex items-start gap-2">
                            <i data-lucide="info" class="w-3 h-3 mt-0.5 flex-shrink-0"></i>
                            <span>Volume discounts apply: 251+ (30% off), 501+ (50% off), 1001+ (60% off)</span>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <!-- Paper Stock -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Paper Stock</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="paper-stock-option relative p-3 border-2 border-blue-600 bg-blue-50 rounded-lg text-left transition-all">
                                <div class="absolute top-2 right-2">
                                    <div class="w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center">
                                        <i data-lucide="check" class="w-3 h-3 text-white"></i>
                                    </div>
                                </div>
                                <span class="absolute -top-2 left-2 px-2 py-1 text-xs bg-green-600 text-white rounded">Popular</span>
                                <p class="text-sm text-gray-900 mb-1">300gsm Gloss Art</p>
                                <p class="text-xs text-gray-500">+KES 0</p>
                            </button>
                            <button class="paper-stock-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">350gsm Premium</p>
                                <p class="text-xs text-gray-500">+KES 3/piece</p>
                            </button>
                            <button class="paper-stock-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">400gsm Ultra Premium</p>
                                <p class="text-xs text-gray-500">+KES 5/piece</p>
                            </button>
                            <button class="paper-stock-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">Textured Stock</p>
                                <p class="text-xs text-gray-500">+KES 7/piece</p>
                            </button>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <!-- Coating/Finish -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Coating/Finish</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="coating-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">No Coating</p>
                                <p class="text-xs text-gray-500">+KES 0</p>
                            </button>
                            <button class="coating-option relative p-3 border-2 border-blue-600 bg-blue-50 rounded-lg text-left transition-all">
                                <div class="absolute top-2 right-2">
                                    <div class="w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center">
                                        <i data-lucide="check" class="w-3 h-3 text-white"></i>
                                    </div>
                                </div>
                                <span class="absolute -top-2 left-2 px-2 py-1 text-xs bg-green-600 text-white rounded">Popular</span>
                                <p class="text-sm text-gray-900 mb-1">Matte Lamination</p>
                                <p class="text-xs text-gray-500">+KES 2/piece</p>
                            </button>
                            <button class="coating-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">Gloss Lamination</p>
                                <p class="text-xs text-gray-500">+KES 2/piece</p>
                            </button>
                            <button class="coating-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <span class="absolute -top-2 left-2 px-2 py-1 text-xs bg-purple-600 text-white rounded">Premium</span>
                                <p class="text-sm text-gray-900 mb-1">Soft-Touch</p>
                                <p class="text-xs text-gray-500">+KES 5/piece</p>
                            </button>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <!-- Corner Style -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Corner Style</label>
                        <div class="grid grid-cols-3 gap-3">
                            <button class="corner-option relative p-3 border-2 border-blue-600 bg-blue-50 rounded-lg text-left transition-all">
                                <div class="absolute top-2 right-2">
                                    <div class="w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center">
                                        <i data-lucide="check" class="w-3 h-3 text-white"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-900 mb-1">Square</p>
                                <p class="text-xs text-gray-500">+KES 0</p>
                            </button>
                            <button class="corner-option relative p-3 border-2 border-gray-200 hover:border-gray-300 rounded-lg text-left transition-all">
                                <p class="text-sm text-gray-900 mb-1">Rounded</p>
                                <p class="text-xs text-gray-500">+KES 1/piece</p>
                            </button>
                            <button class="corner-option relative p-3 border-2 border-gray-200 opacity-50 cursor-not-allowed rounded-lg text-left">
                                <p class="text-sm text-gray-900 mb-1">Custom Die-Cut</p>
                                <p class="text-xs text-gray-500">Quote Required</p>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Artwork Upload -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-2">Upload Artwork (Optional)</h3>
                <p class="text-sm text-gray-600 mb-4">Upload your design files now or later</p>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-colors cursor-pointer">
                    <i data-lucide="upload" class="w-8 h-8 text-gray-400 mx-auto mb-3"></i>
                    <p class="text-sm text-gray-900 mb-1">Click to upload or drag and drop</p>
                    <p class="text-xs text-gray-500">PDF, AI, PSD (max 500MB) • Min 300 DPI • CMYK color mode</p>
                </div>
                <div class="mt-3 flex items-start gap-2 p-3 bg-yellow-50 rounded text-sm text-yellow-800">
                    <i data-lucide="info" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>
                    <p>Don't have artwork ready? No problem! You can upload it later or request our design service.</p>
                </div>
            </div>
        </div>

        <!-- Quote Summary Sidebar -->
        <div class="space-y-6">
            <!-- Price Calculator -->
            <div class="bg-white rounded-lg border border-gray-200 p-6 sticky top-6">
                <div class="flex items-center gap-2 mb-4">
                    <i data-lucide="calculator" class="w-5 h-5"></i>
                    <h3 class="text-lg font-medium text-gray-900">Quote Summary</h3>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <p class="text-sm text-gray-600 mb-3">Price Breakdown</p>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">Base (500 × KES 50)</span>
                                <span class="text-gray-900">KES 25,000</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600">Coating</span>
                                <span class="text-gray-900">KES 1,000</span>
                            </div>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <div>
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-gray-600">Price per piece</span>
                            <span class="text-gray-900">KES 52</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-lg font-medium text-gray-900">Total Price</span>
                            <span class="text-lg font-medium text-gray-900">KES 26,000</span>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-600">Lead Time</span>
                            <span class="text-gray-900">3-5 business days</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-600">Availability</span>
                            <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">In Stock</span>
                        </div>
                    </div>

                    <div class="border-t border-gray-200"></div>

                    <div class="space-y-2">
                        <button class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2">
                            <i data-lucide="shopping-cart" class="w-4 h-4"></i>
                            Submit for Review
                        </button>
                        <p class="text-xs text-gray-500 text-center">Quote will be reviewed by our team within 2 hours</p>
                    </div>

                    <div class="p-3 bg-blue-50 rounded text-sm text-blue-700">
                        <div class="flex items-start gap-2">
                            <i data-lucide="info" class="w-4 h-4 mt-0.5 flex-shrink-0"></i>
                            <div>
                                <p class="mb-1 font-medium">Need help?</p>
                                <p class="text-xs">Our team can assist with design, material selection, and custom requirements.</p>
                                <button class="text-xs mt-1 underline hover:no-underline">Contact us →</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- What's Included -->
            <div class="bg-white rounded-lg border border-gray-200 p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">What's Included</h3>
                <div class="space-y-2">
                    <div class="flex items-center gap-2 text-sm">
                        <i data-lucide="check" class="w-4 h-4 text-green-600 flex-shrink-0"></i>
                        <span class="text-gray-700">Free design review</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm">
                        <i data-lucide="check" class="w-4 h-4 text-green-600 flex-shrink-0"></i>
                        <span class="text-gray-700">Digital proof approval</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm">
                        <i data-lucide="check" class="w-4 h-4 text-green-600 flex-shrink-0"></i>
                        <span class="text-gray-700">Quality guarantee</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm">
                        <i data-lucide="check" class="w-4 h-4 text-green-600 flex-shrink-0"></i>
                        <span class="text-gray-700">Free delivery (Nairobi)</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm">
                        <i data-lucide="check" class="w-4 h-4 text-green-600 flex-shrink-0"></i>
                        <span class="text-gray-700">Satisfaction guarantee</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();
        
        // Quantity slider
        const slider = document.getElementById('quantitySlider');
        const quantityValue = document.getElementById('quantityValue');
        slider.addEventListener('input', function() {
            quantityValue.textContent = this.value;
        });

        // Option selection handlers
        function setupOptionButtons(className) {
            const buttons = document.querySelectorAll('.' + className);
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    if (this.classList.contains('cursor-not-allowed')) return;
                    
                    buttons.forEach(b => {
                        b.classList.remove('border-blue-600', 'bg-blue-50');
                        b.classList.add('border-gray-200');
                        const checkmark = b.querySelector('.absolute.top-2.right-2');
                        if (checkmark) checkmark.remove();
                    });
                    
                    this.classList.remove('border-gray-200');
                    this.classList.add('border-blue-600', 'bg-blue-50');
                    
                    const checkmark = document.createElement('div');
                    checkmark.className = 'absolute top-2 right-2';
                    checkmark.innerHTML = `
                        <div class="w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center">
                            <i data-lucide="check" class="w-3 h-3 text-white"></i>
                        </div>
                    `;
                    this.appendChild(checkmark);
                    lucide.createIcons();
                });
            });
        }

        setupOptionButtons('paper-stock-option');
        setupOptionButtons('coating-option');
        setupOptionButtons('corner-option');
    });
</script>
{% endblock %}