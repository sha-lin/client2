{% extends 'base.html' %}

{% block title %}{{ product.name }} - Product Detail{% endblock %}

{% block content %}
<div class="p-8">
    <!-- Header -->
    <div class="mb-6">
        <a href="{% url 'production_catalog' %}" class="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4">
            <i data-lucide="arrow-left" class="w-4 h-4"></i>
            Back to Catalog
        </a>

        <div class="flex items-start justify-between">
            <div>
                <div class="flex items-center gap-3 mb-2">
                    <h2 class="text-2xl font-medium text-gray-900">{{ product.name }}</h2>
                    <span class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded">Active</span>
                    <span class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded">Featured</span>
                    <span class="px-3 py-1 text-sm border border-gray-300 text-gray-700 rounded flex items-center gap-1">
                        <i data-lucide="trending-up" class="w-3 h-3"></i>
                        Bestseller
                    </span>
                </div>
                <p class="text-gray-600">Product ID: {{ product.id }}</p>
            </div>

            <div class="flex items-center gap-2">
                <button class="px-4 py-2 border border-gray-200 rounded-lg text-sm hover:bg-gray-50">Clone Product</button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 flex items-center gap-2">
                    <i data-lucide="save" class="w-4 h-4"></i>
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="mb-6">
        <div class="border-b border-gray-200">
            <nav class="flex gap-2">
                <button class="tab-button active px-4 py-2 border-b-2 border-blue-600 text-blue-600 font-medium" data-tab="basic">
                    Basic Info
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="pricing">
                    Pricing & Variables
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="images">
                    Images & Media
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="availability">
                    Availability
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="finishing">
                    Finishing Options
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="ecommerce">
                    E-commerce
                </button>
                <button class="tab-button px-4 py-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900" data-tab="analytics">
                    Analytics
                </button>
            </nav>
        </div>
    </div>

    <!-- Tab Content -->
    <div id="tabContent">
        <!-- Basic Info Tab -->
        <div class="tab-content" data-content="basic">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Main Info -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Product Information</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
                                    <input type="text" value="{{ product.name }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Internal Code</label>
                                    <input type="text" value="{{ product.internal_code }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Short Description (150 chars)</label>
                                <input type="text" value="{{ product.short_description }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <p class="text-xs text-gray-500 mt-1">Used in catalog listings and search results</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Long Description</label>
                                <textarea rows="4" class="w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500">{{ product.long_description|safe }}</textarea>
                                <p class="text-xs text-gray-500 mt-1">Detailed product page content (2000 chars max)</p>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                                    <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>Print Materials</option>
                                        <option>Signage</option>
                                        <option>Apparel</option>
                                        <option>Promotional Items</option>
                                        <option>Packaging</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Product Type</label>
                                    <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>Physical Product</option>
                                        <option>Digital Product</option>
                                        <option>Service</option>
                                        <option>Hybrid</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Technical Specifications</h3>
                        <div class="space-y-3">
                            {% if product.unit_of_measure %}
                            <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-700">Unit of Measure</span>
                                <span class="text-sm text-gray-900 capitalize">{{ product.get_unit_of_measure_display|default:product.unit_of_measure }}</span>
                            </div>
                            {% endif %}

                            {% if product.weight %}
                            <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-700">Weight</span>
                                <span class="text-sm text-gray-900">{{ product.weight }} {% if product.weight_unit %}{{ product.get_weight_unit_display|default:product.weight_unit }}{% endif %}</span>
                            </div>
                            {% endif %}

                            {% if product.length and product.width and product.height %}
                            <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-700">Dimensions (L × W × H)</span>
                                <span class="text-sm text-gray-900">{{ product.length }} × {{ product.width }} × {{ product.height }} {% if product.dimension_unit %}{{ product.get_dimension_unit_display|default:product.dimension_unit }}{% endif %}</span>
                            </div>
                            {% endif %}

                            {% if product.warranty %}
                            <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-700">Warranty</span>
                                <span class="text-sm text-gray-900">{{ product.get_warranty_display|default:product.warranty }}</span>
                            </div>
                            {% endif %}

                            {% if product.country_of_origin %}
                            <div class="flex justify-between items-center py-2 border-b border-gray-100">
                                <span class="text-sm font-medium text-gray-700">Country of Origin</span>
                                <span class="text-sm text-gray-900">{{ product.get_country_of_origin_display|default:product.country_of_origin }}</span>
                            </div>
                            {% endif %}

                            {% if not product.unit_of_measure and not product.weight and not product.length and not product.warranty and not product.country_of_origin %}
                            <p class="text-sm text-gray-500 py-2">No technical specifications provided</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Status & Visibility</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-medium text-gray-700">Active</label>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-medium text-gray-700">Featured Product</label>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Lifecycle Status</label>
                                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option>New</option>
                                    <option selected>Active</option>
                                    <option>Phasing Out</option>
                                    <option>Retired</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Customization Tier</label>
                                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option>Non-Custom</option>
                                    <option selected>Semi-Custom</option>
                                    <option>Fully Custom</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Product Health</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded">
                                <div class="flex items-center gap-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span class="text-sm">Data Freshness</span>
                                </div>
                                <span class="text-sm text-green-700">Updated 2d ago</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check" class="w-4 h-4 text-green-600"></i>
                                    <span class="text-sm">Margin Status</span>
                                </div>
                                <span class="text-sm text-green-700">Above threshold</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-yellow-50 rounded">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="alert-circle" class="w-4 h-4 text-yellow-600"></i>
                                    <span class="text-sm">Stock Level</span>
                                </div>
                                <span class="text-sm text-yellow-700">Monitor</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pricing Tab -->
        <div class="tab-content hidden" data-content="pricing">
            <div class="grid grid-cols-1 gap-6">
                <!-- Quantity-Based Pricing Tiers -->
                <div class="bg-white rounded-lg border border-gray-200 p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Pricing Tiers</h3>
                    {% if product.quantity_pricing.all %}
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-sm text-gray-700">Quantity Range</th>
                                    <th class="text-left py-3 px-4 font-medium text-sm text-gray-700">Unit Price</th>
                                    <th class="text-left py-3 px-4 font-medium text-sm text-gray-700">Discount</th>
                                    <th class="text-left py-3 px-4 font-medium text-sm text-gray-700">Total Price (1000 units)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for tier in product.quantity_pricing.all %}
                                <tr class="border-b border-gray-100 hover:bg-gray-50">
                                    <td class="py-3 px-4 text-sm text-gray-900">
                                        {% if tier.max_quantity %}
                                            {{ tier.min_quantity }}-{{ tier.max_quantity }} units
                                        {% else %}
                                            {{ tier.min_quantity }}+ units
                                        {% endif %}
                                    </td>
                                    <td class="py-3 px-4 text-sm font-medium text-gray-900">KES {{ tier.unit_price }}</td>
                                    <td class="py-3 px-4 text-sm text-gray-600">
                                        {% if tier.percentage_discount > 0 %}
                                            {{ tier.percentage_discount }}%
                                        {% else %}
                                            —
                                        {% endif %}
                                    </td>
                                    <td class="py-3 px-4 text-sm font-medium text-green-600">KES {{ tier.unit_price|add:"0" }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="p-4 bg-gray-50 rounded text-gray-600 text-sm">
                        <i data-lucide="info" class="w-4 h-4 inline mr-2"></i>
                        No pricing tiers configured
                    </div>
                    {% endif %}
                </div>

                <!-- Base Pricing Configuration -->
                {% if product.pricing %}
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Base Pricing Configuration</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Pricing Model</label>
                                <input type="text" value="{{ product.pricing.get_pricing_model_display }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Base Cost (EVP)</label>
                                <div class="flex gap-2">
                                    <span class="flex items-center text-gray-500 px-3 border border-gray-200 rounded-l-lg">KES</span>
                                    <input type="number" value="{{ product.pricing.base_cost }}" class="flex-1 px-3 py-2 border border-gray-200 rounded-r-lg bg-gray-50" readonly>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Vendor cost per unit</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Default Margin (%)</label>
                                <input type="number" step="0.01" value="{{ product.pricing.default_margin }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                                <p class="text-xs text-gray-500 mt-1">Standard markup applied</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Minimum Margin (%)</label>
                                <input type="number" step="0.01" value="{{ product.pricing.minimum_margin }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                                <p class="text-xs text-red-500 mt-1">Below this triggers approval requirement</p>
                            </div>

                            {% if product.base_price %}
                            <div class="pt-4 border-t border-gray-200">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-gray-600">Base Selling Price</span>
                                    <span class="text-lg font-semibold text-gray-900">KES {{ product.base_price }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Production Details</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Lead Time</label>
                                <input type="text" value="{% if product.pricing.lead_time_value %}{{ product.pricing.lead_time_value }} {{ product.pricing.get_lead_time_unit_display|lower }}{% endif %}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Production Method</label>
                                <input type="text" value="{{ product.pricing.get_production_method_display }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Minimum Order Quantity</label>
                                <input type="number" value="{{ product.pricing.minimum_quantity }}" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
                            </div>

                            {% if product.pricing.rush_available %}
                            <div class="pt-4 border-t border-gray-200">
                                <div class="flex items-center gap-2 mb-2">
                                    <i data-lucide="zap" class="w-4 h-4 text-orange-500"></i>
                                    <span class="text-sm font-medium text-gray-700">Rush Production Available</span>
                                </div>
                                <div class="text-xs text-gray-600 ml-6">
                                    <p>Lead time: {{ product.pricing.rush_lead_time_value }} {{ product.pricing.get_rush_lead_time_unit_display|lower }}</p>
                                    <p>Upcharge: {{ product.pricing.rush_upcharge }}%</p>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Customization Variables -->
                {% if product.variables.all %}
                <div class="bg-white rounded-lg border border-gray-200 p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Customization Options</h3>
                    <div class="space-y-4">
                        {% for variable in product.variables.all %}
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h4 class="font-medium text-sm text-gray-900">{{ variable.name }}</h4>
                                    <p class="text-xs text-gray-600 mt-1">Type: {{ variable.get_variable_type_display }} • Pricing: {{ variable.get_pricing_type_display }}</p>
                                </div>
                                <span class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded">
                                    {% if variable.variable_type == 'required' %}Required{% else %}Optional{% endif %}
                                </span>
                            </div>
                            {% if variable.options.all %}
                            <div class="flex flex-wrap gap-2">
                                {% for option in variable.options.all %}
                                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">
                                    {{ option.name }}
                                    {% if option.price_modifier > 0 %}
                                    <span class="text-gray-500 ml-1">(+KES {{ option.price_modifier }})</span>
                                    {% endif %}
                                </span>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Other tabs (Images, Availability, Finishing, Analytics) can be added similarly -->
   <!-- Images & Media Tab -->
<div class="tab-content hidden" data-content="images">
    <div class="bg-white rounded-lg border border-gray-200 p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
            <div>
                <h3 class="text-lg font-medium text-gray-900">Product Images</h3>
                <p class="text-sm text-gray-600">Upload and manage product images (min 1200×1200px)</p>
            </div>
            <button class="px-4 py-2 bg-black text-white rounded-lg text-sm hover:bg-gray-800 flex items-center gap-2">
                <i data-lucide="upload" class="w-4 h-4"></i>
                Upload Images
            </button>
        </div>

        <div class="grid grid-cols-4 gap-4">
            {% if product.images.all %}
                {% for image in product.images.all %}
                    <div class="relative group {% if image.is_primary %}border-2 border-blue-500{% else %}border border-gray-200{% endif %} rounded-lg overflow-hidden">
                        <img src="{{ image.image.url }}" alt="{{ image.alt_text }}" class="w-full h-48 object-cover">
                        {% if image.is_primary %}
                            <div class="absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded">Primary</div>
                        {% endif %}
                        {% if image.image_type %}
                            <div class="absolute top-2 right-2 bg-gray-600 text-white text-xs px-2 py-1 rounded">{{ image.get_image_type_display }}</div>
                        {% endif %}
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100">
                            <button class="p-2 bg-white rounded hover:bg-gray-100">
                                <i data-lucide="eye" class="w-4 h-4"></i>
                            </button>
                            <button class="p-2 bg-white rounded hover:bg-gray-100">
                                <i data-lucide="trash-2" class="w-4 h-4 text-red-600"></i>
                            </button>
                        </div>
                        <div class="absolute bottom-0 left-0 right-0 bg-white p-2">
                            <input type="text" value="{{ image.alt_text }}" placeholder="Alt text" class="w-full text-xs border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="col-span-2 text-center py-12 bg-gray-50 rounded-lg">
                    <i data-lucide="image" class="w-12 h-12 text-gray-400 mx-auto mb-2"></i>
                    <p class="text-gray-600">No images uploaded yet</p>
                </div>
            {% endif %}
            
            <!-- Add Image Button (always show) -->
            <div class="border-2 border-dashed border-gray-300 rounded-lg h-48 flex items-center justify-center cursor-pointer hover:border-gray-400 hover:bg-gray-50 transition-all">
                <div class="text-center">
                    <i data-lucide="upload" class="w-8 h-8 text-gray-400 mx-auto mb-2"></i>
                    <span class="text-sm text-gray-600">Add Image</span>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
            <div>
                <h3 class="text-lg font-medium text-gray-900">Template Files</h3>
                <p class="text-sm text-gray-600">Design templates for customer use</p>
            </div>
        </div>

        <div class="space-y-3">
            <!-- Template File 1 -->
            <div class="flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                <div class="w-10 h-10 bg-blue-50 rounded flex items-center justify-center flex-shrink-0">
                    <i data-lucide="file" class="w-5 h-5 text-blue-600"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="font-medium text-sm text-gray-900">Business_Card_Template.ai</div>
                    <div class="text-xs text-gray-500">Adobe Illustrator • 2.4 MB</div>
                </div>
                <button class="p-2 hover:bg-gray-200 rounded transition-colors">
                    <i data-lucide="download" class="w-4 h-4 text-gray-600"></i>
                </button>
                <button class="p-2 hover:bg-gray-200 rounded transition-colors">
                    <i data-lucide="x" class="w-4 h-4 text-gray-600"></i>
                </button>
            </div>

            <!-- Template File 2 -->
            <div class="flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                <div class="w-10 h-10 bg-purple-50 rounded flex items-center justify-center flex-shrink-0">
                    <i data-lucide="file" class="w-5 h-5 text-purple-600"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <div class="font-medium text-sm text-gray-900">Business_Card_Template.psd</div>
                    <div class="text-xs text-gray-500">Photoshop • 5.1 MB</div>
                </div>
                <button class="p-2 hover:bg-gray-200 rounded transition-colors">
                    <i data-lucide="download" class="w-4 h-4 text-gray-600"></i>
                </button>
                <button class="p-2 hover:bg-gray-200 rounded transition-colors">
                    <i data-lucide="x" class="w-4 h-4 text-gray-600"></i>
                </button>
            </div>

            <!-- Upload Template Button -->
            <button class="w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:bg-gray-50 transition-all flex items-center justify-center gap-2">
                <i data-lucide="plus" class="w-4 h-4"></i>
                Upload Template File
            </button>
        </div>
    </div>
</div>  
    

<!-- Availability Tab -->
<div class="tab-content hidden" data-content="availability">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Stock & Availability</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Availability Status</label>
                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option selected>In Stock</option>
                    <option>Low Stock</option>
                    <option>Out of Stock</option>
                    <option>Pre-Order</option>
                    <option>Discontinued</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Current Stock Level</label>
                    <input type="number" value="5000" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Low Stock Threshold</label>
                    <input type="number" value="1000" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Minimum Order Quantity (MOQ)</label>
                <input type="number" value="100" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Market Lead Time (days)</label>
                <input type="text" value="Current vendor lead time" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50" readonly>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Availability Notes</label>
                <textarea rows="3" placeholder="Special conditions, seasonal availability, etc." class="w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Vendor Information</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Preferred Vendor</label>
                <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option>Select vendor</option>
                    <option>Quality Graphics Ltd</option>
                    <option>Express Printing</option>
                    <option>Premium Print Co</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Alternative Vendors</label>
                <div class="space-y-2">
                    <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                        <div>
                            <div class="font-medium text-sm">Quality Graphics Ltd</div>
                            <div class="text-xs text-gray-500">Score: 87 • 3-4 days</div>
                        </div>
                        <button class="p-2 hover:bg-gray-100 rounded">
                            <i data-lucide="x" class="w-4 h-4 text-gray-600"></i>
                        </button>
                    </div>

                    <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                        <div>
                            <div class="font-medium text-sm">Express Printing</div>
                            <div class="text-xs text-gray-500">Score: 82 • 2-3 days</div>
                        </div>
                        <button class="p-2 hover:bg-gray-100 rounded">
                            <i data-lucide="x" class="w-4 h-4 text-gray-600"></i>
                        </button>
                    </div>

                    <button class="w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-600 hover:border-gray-400 hover:bg-gray-50">
                        <i data-lucide="plus" class="w-4 h-4 inline mr-2"></i>
                        Add Vendor
                    </button>
                </div>
            </div>

            <div class="pt-4 border-t border-gray-200">
                <div class="text-sm text-gray-600 mb-2">Last Verified</div>
                <div class="text-sm font-medium">2 days ago by John Doe</div>
                <button class="mt-3 px-4 py-2 border border-gray-200 rounded-lg text-sm hover:bg-gray-50 w-full">
                    Mark as Verified Now
                </button>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Finishing Options Tab -->
<div class="tab-content hidden" data-content="finishing">
<div class="bg-white rounded-lg border border-gray-200 p-6 mb-6">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-medium text-gray-900">Available Finishing Options</h3>
        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 flex items-center gap-2">
            <i data-lucide="plus" class="w-4 h-4"></i>
            Add Option
        </button>
    </div>

    <div class="space-y-4">
        <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex items-center justify-between mb-3">
                <div>
                    <h4 class="font-medium text-sm">Lamination</h4>
                    <p class="text-xs text-gray-600">Price: +KES 500-1200 • Lead time: +1 day</p>
                </div>
                <div class="flex items-center gap-2">
                    <button class="px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded">Edit</button>
                    <button class="px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded">Remove</button>
                </div>
            </div>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Matte</span>
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Gloss</span>
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Soft-Touch</span>
            </div>
        </div>

        <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex items-center justify-between mb-3">
                <div>
                    <h4 class="font-medium text-sm">UV Coating</h4>
                    <p class="text-xs text-gray-600">Price: +KES 800-1500 • Lead time: +1-2 days</p>
                </div>
                <div class="flex items-center gap-2">
                    <button class="px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded">Edit</button>
                    <button class="px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded">Remove</button>
                </div>
            </div>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Flood UV</span>
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Spot UV</span>
            </div>
        </div>

        <div class="border border-gray-200 rounded-lg p-4">
            <div class="flex items-center justify-between mb-3">
                <div>
                    <h4 class="font-medium text-sm">Corner Style</h4>
                    <p class="text-xs text-gray-600">Price: +KES 0-500 • Lead time: +0-1 day</p>
                </div>
                <div class="flex items-center gap-2">
                    <button class="px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded">Edit</button>
                    <button class="px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded">Remove</button>
                </div>
            </div>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Square</span>
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Rounded</span>
                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm">Custom Die-Cut</span>
            </div>
        </div>
    </div>
</div>

<div class="bg-white rounded-lg border border-gray-200 p-6">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Production Specifications</h3>
    <div class="grid grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Production Method</label>
            <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>Select method</option>
                <option>Digital Printing</option>
                <option>Offset Printing</option>
                <option>Screen Printing</option>
                <option>Embroidery</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Color Matching</label>
            <select class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>Select option</option>
                <option>CMYK</option>
                <option>Pantone</option>
                <option>RGB</option>
            </select>
        </div>
    </div>
</div>
</div>

<!-- E-commerce Tab -->
<div class="tab-content hidden" data-content="ecommerce">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">SEO & Discovery</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Meta Title (60 chars)</label>
                <input type="text" value="Premium Business Cards - Professional Quality" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <p class="text-xs text-gray-500 mt-1">Search engine result title</p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Meta Description (160 chars)</label>
                <textarea rows="3" class="w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500">High-quality business cards with premium finishes. Fast turnaround, competitive prices.</textarea>
                <p class="text-xs text-gray-500 mt-1">Search engine preview text</p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">URL Slug</label>
                <input type="text" value="premium-business-cards" class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <p class="text-xs text-gray-500 mt-1">SEO-friendly URL</p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Keywords/Tags</label>
                <input type="text" value="business cards, premium cards, professional..." class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Product Page Content</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Benefits/Features (5-7 bullets)</label>
                <textarea rows="5" class="w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500">• Professional first impression
• Premium paper stock
• Multiple finish options</textarea>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Use Cases/Applications</label>
                <textarea rows="3" class="w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500">Perfect for: Corporate events, networking, client meetings...</textarea>
            </div>

            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                <label class="text-sm font-medium text-gray-700">Instant Quote Eligible</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                <label class="text-sm font-medium text-gray-700">Self-Quote Auto-Approve</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Analytics Tab -->
<div class="tab-content hidden" data-content="analytics">
<div class="grid grid-cols-4 gap-4 mb-6">
    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <div class="text-sm text-gray-600 mb-1">Total Quotes</div>
        <div class="text-2xl font-semibold text-gray-900">156</div>
        <div class="text-xs text-green-600 mt-1">↑ 12% vs last month</div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <div class="text-sm text-gray-600 mb-1">Win Rate</div>
        <div class="text-2xl font-semibold text-gray-900">78%</div>
        <div class="text-xs text-green-600 mt-1">↑ 5% vs avg</div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <div class="text-sm text-gray-600 mb-1">Avg Margin</div>
        <div class="text-2xl font-semibold text-gray-900">32%</div>
        <div class="text-xs text-green-600 mt-1">Above threshold</div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-6">
        <div class="text-sm text-gray-600 mb-1">Revenue (90d)</div>
        <div class="text-2xl font-semibold text-gray-900">KES 487K</div>
        <div class="text-xs text-green-600 mt-1">↑ 18% growth</div>
    </div>
</div>

<div class="bg-white rounded-lg border border-gray-200 p-6">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Performance Metrics</h3>
    <div class="space-y-4">
        <div class="flex items-center justify-between py-3 border-b border-gray-100">
            <span class="text-sm text-gray-700">Quote Frequency (30d)</span>
            <span class="text-sm font-medium text-gray-900">42 quotes</span>
        </div>

        <div class="flex items-center justify-between py-3 border-b border-gray-100">
            <span class="text-sm text-gray-700">Avg Job Value</span>
            <span class="text-sm font-medium text-gray-900">KES 3,120</span>
        </div>

        <div class="flex items-center justify-between py-3 border-b border-gray-100">
            <span class="text-sm text-gray-700">Rework Rate</span>
            <span class="text-sm font-medium text-red-600">2.3% (Low) ⚠️</span>
        </div>

        <div class="flex items-center justify-between py-3 border-b border-gray-100">
            <span class="text-sm text-gray-700">Customer Satisfaction</span>
            <span class="text-sm font-medium text-gray-900">4.8/5.0 ⭐</span>
        </div>

        <div class="flex items-center justify-between py-3">
            <span class="text-sm text-gray-700">Most Popular Config</span>
            <span class="text-sm font-medium text-gray-900">500 qty, Gloss, Rounded</span>
        </div>
    </div>
</div>
</div>

</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();
        
        // Tab switching
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                const targetTab = this.dataset.tab;
                
                // Update button states
                tabButtons.forEach(btn => {
                    btn.classList.remove('active', 'border-blue-600', 'text-blue-600');
                    btn.classList.add('border-transparent', 'text-gray-600');
                });
                this.classList.add('active', 'border-blue-600', 'text-blue-600');
                this.classList.remove('border-transparent', 'text-gray-600');
                
                // Update content visibility
                tabContents.forEach(content => {
                    if (content.dataset.content === targetTab) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });
    });
</script>
{% endblock %}